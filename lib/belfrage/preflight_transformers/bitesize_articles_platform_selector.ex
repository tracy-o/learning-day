defmodule Belfrage.PreflightTransformers.BitesizeArticlesPlatformSelector do
  use Belfrage.Behaviours.Transformer

  @webcore_test_ids [
    "zm8fhbk",
    "zjykkmn",
    "zj8yydm",
    "zwdtrwx",
    "z6x992p",
    "zgd682p",
    "z43njhv",
    "z4k8bdm",
    "z4mp2sg",
    "z6mj47h",
    "z7b9scw",
    "z7vcpg8",
    "z7yrhbk",
    "zbd2cqt",
    "zbfknrd",
    "zbjymfr",
    "zbq6kmn",
    "zbr7rj6",
    "zd3jrj6",
    "zdbtqp3",
    "zdxnjhv",
    "zh8cy9q",
    "zhb9382",
    "zhqbxyc",
    "zhrhjhv",
    "zjqbnrd",
    "zjqnjhv",
    "zjw9382",
    "zkb747h",
    "zkkr7nb",
    "zkvwgwx",
    "zmgkf4j",
    "zmyrf4j",
    "znhf7nb",
    "znkqgwx",
    "znn3pg8",
    "znncpg8",
    "znprhbk",
    "zntwcqt",
    "znvwgwx",
    "zr2yt39",
    "zr6sqp3",
    "z2hgf82",
    "z2k6qfr",
    "z2y7kty",
    "z43gy9q",
    "z4fmd6f",
    "z4p4gwx",
    "z4rdrj6",
    "z4tst39",
    "z4v28hv",
    "z4v792p",
    "z6bt7nb",
    "z6qtqp3",
    "z6vfn9q",
    "z7ksxbk",
    "z7kw92p",
    "z7xf6v4",
    "z7xmmfr",
    "z7ycbdm",
    "z7ygbdm",
    "z8g6jsg",
    "zb97kmn",
    "zbbrrj6",
    "zbf447h",
    "zbrggwx",
    "zbrwcqt",
    "zbvtqp3",
    "zbxby9q",
    "zd2ftrd",
    "zd46qfr",
    "zd6yt39",
    "zd7qqp3",
    "zdm77nb",
    "zdqjjhv",
    "zdttt39",
    "zdv9382",
    "zdxshbk",
    "zf3vvk7",
    "zfmsxyc",
    "zfpypg8",
    "zfv9382",
    "zh3xwty",
    "zh6j92p",
    "zhg9gwx",
    "zhmnmfr",
    "zhr9gwx",
    "zhykg7h",
    "zj4p2v4",
    "zj6yt39",
    "zjbnm39",
    "zjj6jhv",
    "zjnby9q",
    "zjngscw",
    "zjsh2sg",
    "zjvwkmn",
    "zjxvp4j",
    "zk2t2sg",
    "zk3tqp3",
    "zk66qp3",
    "zkb93j6",
    "zkbxwnb",
    "zkhvscw",
    "zkmhmfr",
    "zkqnxbk",
    "zktvhbk",
    "zm23pg8",
    "zm39382",
    "zm6xxyc",
    "zmbvp4j",
    "zmm2d6f",
    "zmmp2sg",
    "zmnft39",
    "zmq6jsg",
    "zmw7d6f",
    "zn9j47h",
    "zndp6v4",
    "znhyt39",
    "zq9nm39",
    "zrg8gwx",
    "zrkkgwx",
    "zrxjrj6",
    "zrynnrd",
    "ztkbn9q",
    "zv76jhv",
    "zv8q8xs",
    "zv9w92p",
    "zvrwkmn",
    "zvtwcqt",
    "zvxj47h",
    "zvxsxyc",
    "zwspm39",
    "zyg8g7h",
    "z2j62v4",
    "z2jw96f",
    "z2n9jfr",
    "z2r6fdm",
    "z2rx2v4",
    "z2sjkty",
    "z32kjfr",
    "z32mxbk",
    "z34q8hv",
    "z3bb3j6",
    "z3cbcmn",
    "z3g3f82",
    "z3g8bqt",
    "z3kbsk7",
    "z3kp6g8",
    "z3nh6g8",
    "z3nyn9q",
    "z3trbqt",
    "z3txjsg",
    "z43s2v4",
    "z43ysk7",
    "z4b3sk7",
    "z4crvwx",
    "z4dfn9q",
    "z4pvf82",
    "z4qvsk7",
    "z4rkd6f",
    "z4y4jfr",
    "z63htrd",
    "z66djsg",
    "z6b2tbk",
    "z6g2qfr",
    "z6hp7yc",
    "z6j26g8",
    "z6ksy9q",
    "z6mts4j",
    "z6nk4xs",
    "z6nx2v4",
    "z6pcg7h",
    "z6r8qyc",
    "z6wm6v4",
    "z6wr3j6",
    "z6xmjsg",
    "z72sm39",
    "z72yydm",
    "z737rj6",
    "z76ny9q",
    "z7cr96f",
    "z7fb3j6",
    "z7j496f",
    "z7ndkty",
    "z7p48xs",
    "z7p9cmn",
    "z7pm6g8",
    "z7qx2v4",
    "z7w2jsg",
    "z7xjjsg",
    "z84yf82",
    "z863cxs",
    "z8fdr2p",
    "z8h7dp3",
    "z8hbvwx",
    "z8r3ydm",
    "z8y7jsg",
    "z944g7h",
    "z9948hv",
    "z99ckty",
    "z9fnp4j",
    "z9gqqfr",
    "z9k4bqt",
    "z9n4kty",
    "z9ppxbk",
    "z9pxtrd",
    "z9rsn9q",
    "zb4nm39",
    "zb7vn9q",
    "zb88jsg",
    "zb9txbk",
    "zbc67yc",
    "zbfrsk7",
    "zbjntrd",
    "zbnpxbk",
    "zbpw7nb",
    "zbqdcmn",
    "zbrdjsg",
    "zbrp7yc",
    "zbsrkxs",
    "zbsvsk7",
    "zbtx2v4",
    "zbyb9ty",
    "zc93ydm",
    "zcdqdp3",
    "zchysk7",
    "zckqm39",
    "zckydxs",
    "zcnw8hv",
    "zcs9vwx",
    "zctbydm",
    "zctjkty",
    "zcxcbqt",
    "zd27xbk",
    "zd76m39",
    "zd8kr2p",
    "zdctxbk",
    "zdhxm39",
    "zdkn3qt",
    "zdp93j6",
    "zdqmqfr",
    "zdwm8hv",
    "zdxr3j6",
    "zf4fn9q",
    "zf4gg7h",
    "zf6w8hv",
    "zfbny9q",
    "zfbsp4j",
    "zfbtp4j",
    "zfnhxbk",
    "zfpmwnb",
    "zfrmdp3",
    "zfrp3qt",
    "zfwvrmn",
    "zg6qwnb",
    "zgbybqt",
    "zgc22v4",
    "zgfjdp3",
    "zgfpqfr",
    "zgg84xs",
    "zghwr2p",
    "zgp9r2p",
    "zgqq6rd",
    "zgqvf82",
    "zgrhvj6",
    "zgsw8hv",
    "zgvsvwx",
    "zgx3ydm",
    "zgycydm",
    "zh73ydm",
    "zh744xs",
    "zh9v382",
    "zhm7jsg",
    "zhq4g7h",
    "zhrnhcw",
    "zhxcr2p",
    "zhxpscw",
    "zj32p9q",
    "zj4rbqt",
    "zjkhp4j",
    "zjkk96f",
    "zjt4g7h",
    "zjxcg7h",
    "zk4jdp3",
    "zk6hywx",
    "zkbf3j6",
    "zkcfsk7",
    "zkg3ydm",
    "zkqgcmn",
    "zkqtjsg",
    "zkthqfr",
    "zkyr47h",
    "zm42jsg",
    "zm7nhcw",
    "zm8bydm",
    "zm8j4xs",
    "zmcvrmn",
    "zmfhhcw",
    "zmhrdnb",
    "zmnj7yc",
    "zmp2wnb",
    "zmxc96f",
    "zmy692p",
    "zn27dp3",
    "zn3svwx",
    "zn443j6",
    "zn4tnrd",
    "zn77dp3",
    "zn7ssk7",
    "zn8y3j6",
    "zn9fn9q",
    "znhr3j6",
    "znsmxyc",
    "znvts82",
    "znxmjsg",
    "zp2d4xs",
    "zp2qwnb",
    "zp4w239",
    "zp62dp3",
    "zp64cmn",
    "zp7g8p3",
    "zp7yn9q",
    "zpdcydm",
    "zpdfrmn",
    "zpj896f",
    "zpnhsk7",
    "zpnybqt",
    "zpr6m39",
    "zpsgbqt",
    "zpvhywx",
    "zq3d4xs",
    "zq4yn9q",
    "zq89dp3",
    "zq8cg7h",
    "zq8wwnb",
    "zq8xtrd",
    "zqbt6g8",
    "zqdbkhv",
    "zqhjdp3",
    "zqkfb7h",
    "zqp2tcw",
    "zqqnn9q",
    "zqs2qfr",
    "zqv3sk7",
    "zqwc8p3",
    "zr3r8p3",
    "zr99g7h",
    "zrfgcqt",
    "zrmhscw",
    "zrqjkty",
    "zrsbrj6",
    "zrvmqfr",
    "zrvr3j6",
    "zrwfp4j",
    "zrysp4j",
    "zs64r2p",
    "zscrvwx",
    "zsf3hcw",
    "zsjv46f",
    "zstn3qt",
    "zt42jsg",
    "zt7k4xs",
    "zt7q8hv",
    "zt9b46f",
    "zt9vhcw",
    "ztf3f82",
    "ztgptrd",
    "ztjcbqt",
    "ztmrg7h",
    "ztv3p4j",
    "ztvh6g8",
    "zv2c3j6",
    "zv7mh4j",
    "zv9hxbk",
    "zvbvsk7",
    "zvckjp3",
    "zvphsk7",
    "zvpvbqt",
    "zvqgcmn",
    "zvrtywx",
    "zvsk4xs",
    "zvt4r2p",
    "zvvn6g8",
    "zvy9vwx",
    "zvyn3qt",
    "zw28qyc",
    "zw2wwnb",
    "zw3fn9q",
    "zw4yg2p",
    "zw7b9ty",
    "zw7kwnb",
    "zw94bqt",
    "zwbvg7h",
    "zwcfp4j",
    "zwkwqfr",
    "zwq44xs",
    "zwwsb7h",
    "zx64r2p",
    "zx7b3j6",
    "zx7p6g8",
    "zx88cmn",
    "zx9mqfr",
    "zxqbr2p",
    "zxvqdp3",
    "zy3yf82",
    "zy44bqt",
    "zy4rn9q",
    "zy9sydm",
    "zyj996f",
    "zykkvwx",
    "zywtxbk"
  ]

  @webcore_live_ids [
    "zj8yydm",
    "z6x992p",
    "zgd682p",
    "z43njhv",
    "z4k8bdm",
    "z4mp2sg",
    "z6mj47h",
    "z7b9scw",
    "z7vcpg8",
    "z7yrhbk",
    "zbd2cqt",
    "zbfknrd",
    "zbjymfr",
    "zbq6kmn",
    "zbr7rj6",
    "zd3jrj6",
    "zdbtqp3",
    "zdxnjhv",
    "zh8cy9q",
    "zhb9382",
    "zhqbxyc",
    "zhrhjhv",
    "zjqbnrd",
    "zjqnjhv",
    "zjw9382",
    "zkb747h",
    "zkkr7nb",
    "zkvwgwx",
    "zmgkf4j",
    "zmyrf4j",
    "znhf7nb",
    "znkqgwx",
    "znn3pg8",
    "znncpg8",
    "znprhbk",
    "zntwcqt",
    "znvwgwx",
    "zr2yt39",
    "zr6sqp3",
    "z2hgf82",
    "z2k6qfr",
    "z2y7kty",
    "z43gy9q",
    "z4fmd6f",
    "z4p4gwx",
    "z4rdrj6",
    "z4tst39",
    "z4v28hv",
    "z4v792p",
    "z6bt7nb",
    "z6qtqp3",
    "z6vfn9q",
    "z7ksxbk",
    "z7kw92p",
    "z7xf6v4",
    "z7xmmfr",
    "z7ycbdm",
    "z7ygbdm",
    "z8g6jsg",
    "zb97kmn",
    "zbbrrj6",
    "zbf447h",
    "zbrggwx",
    "zbrwcqt",
    "zbvtqp3",
    "zbxby9q",
    "zd2ftrd",
    "zd46qfr",
    "zd6yt39",
    "zd7qqp3",
    "zdm77nb",
    "zdqjjhv",
    "zdttt39",
    "zdv9382",
    "zdxshbk",
    "zf3vvk7",
    "zfmsxyc",
    "zfpypg8",
    "zfv9382",
    "zh3xwty",
    "zh6j92p",
    "zhg9gwx",
    "zhmnmfr",
    "zhr9gwx",
    "zhykg7h",
    "zj4p2v4",
    "zj6yt39",
    "zjbnm39",
    "zjj6jhv",
    "zjnby9q",
    "zjngscw",
    "zjsh2sg",
    "zjvwkmn",
    "zjxvp4j",
    "zk2t2sg",
    "zk3tqp3",
    "zk66qp3",
    "zkb93j6",
    "zkbxwnb",
    "zkhvscw",
    "zkmhmfr",
    "zkqnxbk",
    "zktvhbk",
    "zm23pg8",
    "zm39382",
    "zm6xxyc",
    "zmbvp4j",
    "zmm2d6f",
    "zmmp2sg",
    "zmnft39",
    "zmq6jsg",
    "zmw7d6f",
    "zn9j47h",
    "zndp6v4",
    "znhyt39",
    "zq9nm39",
    "zrg8gwx",
    "zrkkgwx",
    "zrxjrj6",
    "zrynnrd",
    "ztkbn9q",
    "zv76jhv",
    "zv8q8xs",
    "zv9w92p",
    "zvrwkmn",
    "zvtwcqt",
    "zvxj47h",
    "zvxsxyc",
    "zwspm39",
    "zyg8g7h",
    "z2j62v4",
    "z2jw96f",
    "z2n9jfr",
    "z2r6fdm",
    "z2rx2v4",
    "z2sjkty",
    "z32kjfr",
    "z32mxbk",
    "z34q8hv",
    "z3bb3j6",
    "z3cbcmn",
    "z3g3f82",
    "z3g8bqt",
    "z3kbsk7",
    "z3kp6g8",
    "z3nh6g8",
    "z3nyn9q",
    "z3trbqt",
    "z3txjsg",
    "z43s2v4",
    "z43ysk7",
    "z4b3sk7",
    "z4crvwx",
    "z4dfn9q",
    "z4pvf82",
    "z4qvsk7",
    "z4rkd6f",
    "z4y4jfr",
    "z63htrd",
    "z66djsg",
    "z6b2tbk",
    "z6g2qfr",
    "z6hp7yc",
    "z6j26g8",
    "z6ksy9q",
    "z6mts4j",
    "z6nk4xs",
    "z6nx2v4",
    "z6pcg7h",
    "z6r8qyc",
    "z6wm6v4",
    "z6wr3j6",
    "z6xmjsg",
    "z72sm39",
    "z72yydm",
    "z737rj6",
    "z76ny9q",
    "z7cr96f",
    "z7fb3j6",
    "z7j496f",
    "z7ndkty",
    "z7p48xs",
    "z7p9cmn",
    "z7pm6g8",
    "z7qx2v4",
    "z7w2jsg",
    "z7xjjsg",
    "z84yf82",
    "z863cxs",
    "z8fdr2p",
    "z8h7dp3",
    "z8hbvwx",
    "z8r3ydm",
    "z8y7jsg",
    "z944g7h",
    "z9948hv",
    "z99ckty",
    "z9fnp4j",
    "z9gqqfr",
    "z9k4bqt",
    "z9n4kty",
    "z9ppxbk",
    "z9pxtrd",
    "z9rsn9q",
    "zb4nm39",
    "zb7vn9q",
    "zb88jsg",
    "zb9txbk",
    "zbc67yc",
    "zbfrsk7",
    "zbjntrd",
    "zbnpxbk",
    "zbpw7nb",
    "zbqdcmn",
    "zbrdjsg",
    "zbrp7yc",
    "zbsrkxs",
    "zbsvsk7",
    "zbtx2v4",
    "zbyb9ty",
    "zc93ydm",
    "zcdqdp3",
    "zchysk7",
    "zckqm39",
    "zckydxs",
    "zcnw8hv",
    "zcs9vwx",
    "zctbydm",
    "zctjkty",
    "zcxcbqt",
    "zd27xbk",
    "zd76m39",
    "zd8kr2p",
    "zdctxbk",
    "zdhxm39",
    "zdkn3qt",
    "zdp93j6",
    "zdqmqfr",
    "zdwm8hv",
    "zdxr3j6",
    "zf4fn9q",
    "zf4gg7h",
    "zf6w8hv",
    "zfbny9q",
    "zfbsp4j",
    "zfbtp4j",
    "zfnhxbk",
    "zfpmwnb",
    "zfrmdp3",
    "zfrp3qt",
    "zfwvrmn",
    "zg6qwnb",
    "zgbybqt",
    "zgc22v4",
    "zgfjdp3",
    "zgfpqfr",
    "zgg84xs",
    "zghwr2p",
    "zgp9r2p",
    "zgqq6rd",
    "zgqvf82",
    "zgrhvj6",
    "zgsw8hv",
    "zgvsvwx",
    "zgx3ydm",
    "zgycydm",
    "zh73ydm",
    "zh744xs",
    "zh9v382",
    "zhm7jsg",
    "zhq4g7h",
    "zhrnhcw",
    "zhxcr2p",
    "zhxpscw",
    "zj32p9q",
    "zj4rbqt",
    "zjkhp4j",
    "zjkk96f",
    "zjt4g7h",
    "zjxcg7h",
    "zk4jdp3",
    "zk6hywx",
    "zkbf3j6",
    "zkcfsk7",
    "zkg3ydm",
    "zkqgcmn",
    "zkqtjsg",
    "zkthqfr",
    "zkyr47h",
    "zm42jsg",
    "zm7nhcw",
    "zm8bydm",
    "zm8j4xs",
    "zmcvrmn",
    "zmfhhcw",
    "zmhrdnb",
    "zmnj7yc",
    "zmp2wnb",
    "zmxc96f",
    "zmy692p",
    "zn27dp3",
    "zn3svwx",
    "zn443j6",
    "zn4tnrd",
    "zn77dp3",
    "zn7ssk7",
    "zn8y3j6",
    "zn9fn9q",
    "znhr3j6",
    "znsmxyc",
    "znvts82",
    "znxmjsg",
    "zp2d4xs",
    "zp2qwnb",
    "zp4w239",
    "zp62dp3",
    "zp64cmn",
    "zp7g8p3",
    "zp7yn9q",
    "zpdcydm",
    "zpdfrmn",
    "zpj896f",
    "zpnhsk7",
    "zpnybqt",
    "zpr6m39",
    "zpsgbqt",
    "zpvhywx",
    "zq3d4xs",
    "zq4yn9q",
    "zq89dp3",
    "zq8cg7h",
    "zq8wwnb",
    "zq8xtrd",
    "zqbt6g8",
    "zqdbkhv",
    "zqhjdp3",
    "zqkfb7h",
    "zqp2tcw",
    "zqqnn9q",
    "zqs2qfr",
    "zqv3sk7",
    "zqwc8p3",
    "zr3r8p3",
    "zr99g7h",
    "zrfgcqt",
    "zrmhscw",
    "zrqjkty",
    "zrsbrj6",
    "zrvmqfr",
    "zrvr3j6",
    "zrwfp4j",
    "zrysp4j",
    "zs64r2p",
    "zscrvwx",
    "zsf3hcw",
    "zsjv46f",
    "zstn3qt",
    "zt42jsg",
    "zt7k4xs",
    "zt7q8hv",
    "zt9b46f",
    "zt9vhcw",
    "ztf3f82",
    "ztgptrd",
    "ztjcbqt",
    "ztmrg7h",
    "ztv3p4j",
    "ztvh6g8",
    "zv2c3j6",
    "zv7mh4j",
    "zv9hxbk",
    "zvbvsk7",
    "zvckjp3",
    "zvphsk7",
    "zvpvbqt",
    "zvqgcmn",
    "zvrtywx",
    "zvsk4xs",
    "zvt4r2p",
    "zvvn6g8",
    "zvy9vwx",
    "zvyn3qt",
    "zw28qyc",
    "zw2wwnb",
    "zw3fn9q",
    "zw4yg2p",
    "zw7b9ty",
    "zw7kwnb",
    "zw94bqt",
    "zwbvg7h",
    "zwcfp4j",
    "zwkwqfr",
    "zwq44xs",
    "zwwsb7h",
    "zx64r2p",
    "zx7b3j6",
    "zx7p6g8",
    "zx88cmn",
    "zx9mqfr",
    "zxqbr2p",
    "zxvqdp3",
    "zy3yf82",
    "zy44bqt",
    "zy4rn9q",
    "zy9sydm",
    "zyj996f",
    "zykkvwx",
    "zywtxbk"
  ]

  @impl Transformer
  def call(envelope = %Envelope{request: request}) do
    {:ok, Envelope.add(envelope, :private, %{platform: get_platform(request)})}
  end

  defp webcore_live_id?(id) do
    id in @webcore_live_ids
  end

  defp webcore_test_id?(id) do
    id in @webcore_test_ids
  end

  defp production_environment() do
    Application.get_env(:belfrage, :production_environment)
  end

  defp get_platform(%Envelope.Request{path_params: %{"id" => id}}) do
    cond do
      production_environment() == "live" and webcore_live_id?(id) ->
        "Webcore"

      production_environment() == "test" and webcore_test_id?(id) ->
        "Webcore"

      true ->
        "MorphRouter"
    end
  end

  defp get_platform(_request) do
    "MorphRouter"
  end
end
