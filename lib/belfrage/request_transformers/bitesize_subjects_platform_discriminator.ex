defmodule Belfrage.RequestTransformers.BitesizeSubjectsPlatformDiscriminator do
  @moduledoc """
  Alters the Platform and Origin for a subset of Bitesize Subjects IDs that need to be served by Webcore.
  """
  use Belfrage.Behaviours.Transformer

  @webcore_test_ids [
    "zxtnvcw",
    "zmpfb9q",
    "zphybqt",
    "zhtf3j6",
    "z7mtsbk",
    "zvsc96f",
    "z8yrwmn",
    "zjcdxnb",
    "znwqtfr",
    "zmj2n39",
    "zdmtsbk",
    "zft3d2p",
    "zf48q6f",
    "zg9jtfr",
    "z3vrwmn",
    "zykw2hv",
    "zxtbng8",
    "zk6pyrd",
    "zb3cjxs",
    "zt3rkqt",
    "zhbc87h",
    "zkpv9j6",
    "zgb4q6f",
    "zc7xpv4",
    "zgj2tfr",
    "zqnygk7",
    "z2f3cdm",
    "z426n39",
    "zcrk2hv",
    "z4c8mp3",
    "zv6sr82",
    "z7svr82",
    "zm6wfg8",
    "z94dxnb",
    "zf9d7ty",
    "z3cr9j6",
    "zrdv3k7",
    "z8hscj6",
    "zsykb82",
    "z8mfsk7",
    "z37qtfr",
    "z8rdtfr",
    "zkxhfg8",
    "z6vg9j6",
    "zwpfb9q",
    "zrqmhyc",
    "z9frq6f",
    "zs48q6f",
    "zydqpbk",
    "z9xhfg8",
    "zvcjpv4",
    "z4bt4wx",
    "z76ngk7",
    "zdgk2hv",
    "zdhs34j",
    "zxyb4wx",
    "z7f3cdm",
    "zqxpb9q",
    "zmyb4wx",
    "zdcwhyc",
    "z7nygk7",
    "z2tsr82",
    "z33d7ty",
    "z9mtsbk",
    "zrg97ty",
    "zr3t4wx",
    "z4ygxnb",
    "zx2vw6f",
    "zy9d7ty",
    "zjpfb9q",
    "z8tnvcw",
    "z2svr82",
    "zjnygk7",
    "zkmngk7",
    "zmf3cdm",
    "zxpy4wx",
    "zwbkxnb",
    "zdsb87h",
    "z76sr82",
    "z72mn39",
    "zbhy4wx",
    "zfhbwmn",
    "zx394xs",
    "z2mxsbk",
    "zmx6fg8",
    "zmhfcdm",
    "zdmtsbk",
    "zhs3kqt",
    "zst3d2p",
    "z2w7pv4",
    "z3tfcdm",
    "zwr8mp3",
    "z4crr2p",
    "zdj2tfr",
    "zq26n39",
    "zpdj6sg",
    "zkfgd2p",
    "zmv4cmn",
    "zd8kkty",
    "zypgcmn",
    "zwd88hv",
    "zmdq92p",
    "zv7dr2p",
    "zhhwt39",
    "znnqpg8",
    "zbghbdm",
    "z4ngr2p",
    "zrghbdm",
    "zgh2qfr",
    "zjwbd6f",
    "zyjkbqt",
    "z7kwcqt",
    "zdm3nrd",
    "z88vf82",
    "zmxqkmn",
    "zbrscqt",
    "zv3jmfr",
    "zhbfd6f",
    "zfw9bdm",
    "zksyb82",
    "z4hmwty",
    "zd4png8",
    "zv7dcqt",
    "zsbxqfr",
    "z39n6g8",
    "z6sjkty",
    "zjjfp4j",
    "zpv2wnb",
    "zxsvr82",
    "z39d7ty",
    "zhy7dp3",
    "zw9wy4j",
    "zwxhfg8",
    "zsbc87h",
    "zfhbr2p",
    "z7tnvcw",
    "zst3g7h",
    "zmbff4j",
    "zr99cqt",
    "zvryt39",
    "z7mbcmn",
    "zqsv7p3",
    "z7syg2p",
    "zbhv8xs",
    "z338jsg",
    "zrnbwty",
    "znqtbdm",
    "z2pfb9q",
    "z3wnvj6",
    "z6svr82",
    "z7hs34j",
    "z826n39",
    "zbkw2hv",
    "zcdqxnb",
    "zcw76sg",
    "zgkw2hv",
    "zjpn3qt",
    "zjxhfg8",
    "zkqmhyc",
    "zmyvcxs",
    "zqnsb7h",
    "zv48q6f",
    "zvnrq6f",
    "zxnygk7",
    "zxv346f",
    "zyhbwmn",
    "z2fyrmn",
    "z7sfg2p",
    "z22yqhv",
    "z27gf82",
    "z2bgkhv",
    "z2dqrwx",
    "z2ffr82",
    "z2fycdm",
    "z2grd2p",
    "z2n3r82",
    "z2ry3j6",
    "z2yv4wx",
    "z2yycdm",
    "z34w7ty",
    "z36tyrd",
    "z3882hv",
    "z39j2hv",
    "z3fycdm",
    "z3kqmp3",
    "z3nnb9q",
    "z3rbg82",
    "z3tbwmn",
    "z3tg4wx",
    "z3wj6sg",
    "z4chng8",
    "z4mmn39",
    "z4mxsbk",
    "z4nsgk7",
    "z6339j6",
    "z6882hv",
    "z69k7ty",
    "z6bqkmn",
    "z6c4wsg",
    "z6vv4wx",
    "z6wwxnb",
    "z73b9ty",
    "z74dmbk",
    "z7d7gwx",
    "z7fycdm",
    "z7gjmp3",
    "z7nnb9q",
    "z7nrydm",
    "z7rcwmn",
    "z7ssgk7",
    "z82hsbk",
    "z849q6f",
    "z87tn39",
    "z88t97h",
    "z8bqxg8",
    "z8ftp4j",
    "z8mpfg8",
    "z8mxrwx",
    "z8nsb7h",
    "z8q9pbk",
    "z8sfr82",
    "z8thvcw",
    "z8w3n9q",
    "z8x6cj6",
    "z8yv4wx",
    "z99q7yc",
    "z9bbkqt",
    "z9jxhyc",
    "z9mxsbk",
    "z9pnb9q",
    "z9sfr82",
    "z9x6fg8",
    "zb6tyrd",
    "zbhgjxs",
    "zc9s6g8",
    "zcc2gdm",
    "zcd26sg",
    "zcgv39q",
    "zcjxhyc",
    "zcpnb9q",
    "zcqqtfr",
    "zcvgh39",
    "zcwmtfr",
    "zcyycdm",
    "zd2f7nb",
    "zd4dy9q",
    "zd63xyc",
    "zd66fg8",
    "zd8fv9q",
    "zdb4jfr",
    "zdhp34j",
    "zdp4382",
    "zdsfg2p",
    "zdyhn9q",
    "zdykjxs",
    "zf2f9j6",
    "zf2yf4j",
    "zf49q6f",
    "zf72pv4",
    "zfk82hv",
    "zfkk7ty",
    "zfmhvj6",
    "zfq7hyc",
    "zfwjxg8",
    "zg6tyrd",
    "zg87xnb",
    "zgffr82",
    "zghp34j",
    "zgjj6sg",
    "zgthvcw",
    "zgwc96f",
    "zgwwxnb",
    "zh4mrj6",
    "zh86n39",
    "zh8dmp3",
    "zh9kqyc",
    "zhdwxnb",
    "zhgrd2p",
    "zhjmnk7",
    "zhk82hv",
    "zhpchbk",
    "zhrcwmn",
    "zhrrd2p",
    "zj3d7ty",
    "zj3nf82",
    "zj44jxs",
    "zjbg87h",
    "zjhhvcw",
    "zjkj382",
    "zjkphbk",
    "zjnsgk7",
    "zjrk7v4",
    "zjv39j6",
    "zjwvb82",
    "zjyvcxs",
    "zk3jmbk",
    "zk66fg8",
    "zk6tyrd",
    "zkbbkqt",
    "zkbkf4j",
    "zkdvp4j",
    "zkfycdm",
    "zkk72v4",
    "zknsgk7",
    "zkpn3qt",
    "zkrkscw",
    "zks6hcw",
    "zkvv4wx",
    "zkx6fg8",
    "zkxxsbk",
    "zm49q6f",
    "zmrcwmn",
    "zn3vvk7",
    "zn49q6f",
    "zn76fdm",
    "zn8d239",
    "zndc96f",
    "zngg87h",
    "znjqtfr",
    "znk647h",
    "znmmn39",
    "zns9nrd",
    "znwhfg8",
    "znwj6sg",
    "zp3487h",
    "zp8dmp3",
    "zp8r4xs",
    "zpb9d2p",
    "zpbbkqt",
    "zpccwmn",
    "zpdtsbk",
    "zpdwxnb",
    "zpk87v4",
    "zpqxs82",
    "zprrd2p",
    "zpvckqt",
    "zpxnyrd",
    "zpyr9j6",
    "zq6svcw",
    "zqbg87h",
    "zqbsydm",
    "zqbw2hv",
    "zqc8239",
    "zqgrd2p",
    "zqhpk2p",
    "zqhyb9q",
    "zqj3n9q",
    "zqkk7ty",
    "zqnsgk7",
    "zqqsw6f",
    "zqsfr82",
    "zqtf34j",
    "zqv346f",
    "zr4nxbk",
    "zr6tyrd",
    "zr77hyc",
    "zrhp34j",
    "zrqqtfr",
    "zrssgk7",
    "zryycdm",
    "zs2tywx",
    "zs3487h",
    "zs44jxs",
    "zs7s4wx",
    "zs99q6f",
    "zs9k7ty",
    "zsdwmbk",
    "zsgkwmn",
    "zshp34j",
    "zsjpyrd",
    "zsjqtfr",
    "zsn4h39",
    "zsq7hyc",
    "zsrfvwx",
    "zsw4kty",
    "zt49jfr",
    "zt62mnb",
    "zt7xk2p",
    "zt8dmp3",
    "zt9k7ty",
    "ztkxpv4",
    "zttbcmn",
    "ztvckqt",
    "ztw2p9q",
    "ztyr9j6",
    "zv2mn39",
    "zv63d2p",
    "zvdwxnb",
    "zvhhvcw",
    "zvkk7ty",
    "zvmxsbk",
    "zvq9bdm",
    "zvsd8xs",
    "zvsfr82",
    "zvtsg2p",
    "zvwwxnb",
    "zwfyrmn",
    "zwg9qyc",
    "zwhp34j",
    "zwmpfg8",
    "zwpnb9q",
    "zwttyrd",
    "zwv39j6",
    "zwv8q6f",
    "zwvpsk7",
    "zwwp8mn",
    "zwyv4wx",
    "zx339j6",
    "zx3bkqt",
    "zx72pv4",
    "zx882hv",
    "zx9k7ty",
    "zxc4jxs",
    "zxfyjty",
    "zxn3r82",
    "zxrcdnb",
    "zxsbcdm",
    "zxvv4wx",
    "zy2mn39",
    "zy66fg8",
    "zy72pv4",
    "zyfkng8",
    "zyhp34j",
    "zyhs7p3",
    "zymykqt",
    "zyq7hyc",
    "zyxp3qt",
    "z67p3qt",
    "zwbr8p3",
    "zjgcdnb",
    "zqr4wsg",
    "z7c9jfr",
    "z24kqyc",
    "zm987v4",
    "zxkd239",
    "z68wmbk",
    "ztdjxg8",
    "zhwq6rd",
    "zbtpvj6",
    "zghn3qt",
    "zrpsb7h",
    "zcnfg2p",
    "z4syrmn",
    "z9fvcxs",
    "zky346f",
    "zgv9qyc",
  ]

  @webcore_live_ids [
    "zxtnvcw",
    "zmpfb9q",
    "zphybqt",
    "zhtf3j6",
    "z7mtsbk",
    "zvsc96f",
    "z8yrwmn",
    "zjcdxnb",
    "znwqtfr",
    "zmj2n39",
    "zft3d2p",
    "zf48q6f",
    "zg9jtfr",
    "z3vrwmn",
    "zykw2hv",
    "zxtbng8",
    "zk6pyrd",
    "zb3cjxs",
    "zt3rkqt",
    "zhbc87h",
    "zkpv9j6",
    "zgb4q6f",
    "zc7xpv4",
    "zgj2tfr",
    "zqnygk7",
    "z2f3cdm",
    "z426n39",
    "zcrk2hv",
    "z4c8mp3",
    "zv6sr82",
    "z7svr82",
    "zm6wfg8",
    "z94dxnb",
    "zf9d7ty",
    "z3cr9j6",
    "zrdv3k7",
    "z8hscj6",
    "zsykb82",
    "z8mfsk7",
    "z37qtfr",
    "z8rdtfr",
    "zkxhfg8",
    "z6vg9j6",
    "zwpfb9q",
    "zrqmhyc",
    "z9frq6f",
    "zs48q6f",
    "zydqpbk",
    "z9xhfg8",
    "zvcjpv4",
    "z4bt4wx",
    "z76ngk7",
    "zdgk2hv",
    "zdhs34j",
    "zxyb4wx",
    "z7f3cdm",
    "zqxpb9q",
    "zmyb4wx",
    "zdcwhyc",
    "z7nygk7",
    "z2tsr82",
    "z33d7ty",
    "z9mtsbk",
    "zrg97ty",
    "zr3t4wx",
    "z4ygxnb",
    "zx2vw6f",
    "zy9d7ty",
    "zjpfb9q",
    "z8tnvcw",
    "z2svr82",
    "zjnygk7",
    "zkmngk7",
    "zmf3cdm",
    "zxpy4wx",
    "zwbkxnb",
    "zdsb87h",
    "z76sr82",
    "z72mn39",
    "zbhy4wx",
    "zfhbwmn",
    "zx394xs",
    "z2mxsbk",
    "zmx6fg8",
    "zmhfcdm",
    "zdmtsbk",
    "zhs3kqt",
    "zst3d2p",
    "z2w7pv4",
    "z3tfcdm",
    "zwr8mp3",
    "z4crr2p",
    "zdj2tfr",
    "zq26n39",
    "zpdj6sg",
    "zkfgd2p",
    "zmv4cmn",
    "zd8kkty",
    "zypgcmn",
    "zwd88hv",
    "zmdq92p",
    "zv7dr2p",
    "zhhwt39",
    "znnqpg8",
    "zbghbdm",
    "z4ngr2p",
    "zrghbdm",
    "zgh2qfr",
    "zjwbd6f",
    "zyjkbqt",
    "z7kwcqt",
    "zdm3nrd",
    "z88vf82",
    "zmxqkmn",
    "zbrscqt",
    "zv3jmfr",
    "zhbfd6f",
    "zfw9bdm",
    "zksyb82",
    "z4hmwty",
    "zd4png8",
    "zv7dcqt",
    "zsbxqfr",
    "z39n6g8",
    "z6sjkty",
    "zjjfp4j",
    "zpv2wnb",
    "zxsvr82",
    "z39d7ty",
    "zhy7dp3",
    "zw9wy4j",
    "zwxhfg8",
    "zsbc87h",
    "zfhbr2p",
    "z7tnvcw",
    "zst3g7h",
    "zmbff4j",
    "zr99cqt",
    "zvryt39",
    "z7mbcmn",
    "zqsv7p3",
    "z7syg2p",
    "zbhv8xs",
    "z338jsg",
    "zrnbwty",
    "znqtbdm",
    "z2pfb9q",
    "z3wnvj6",
    "z6svr82",
    "z7hs34j",
    "z826n39",
    "zbkw2hv",
    "zcdqxnb",
    "zcw76sg",
    "zgkw2hv",
    "zjpn3qt",
    "zjxhfg8",
    "zkqmhyc",
    "zmyvcxs",
    "zqnsb7h",
    "zv48q6f",
    "zvnrq6f",
    "zxnygk7",
    "zxv346f",
    "zyhbwmn",
    "z2fyrmn",
    "z7sfg2p",
    "z22yqhv",
    "z27gf82",
    "z2bgkhv",
    "z2dqrwx",
    "z2ffr82",
    "z2fycdm",
    "z2grd2p",
    "z2n3r82",
    "z2ry3j6",
    "z2yv4wx",
    "z2yycdm",
    "z34w7ty",
    "z36tyrd",
    "z3882hv",
    "z39j2hv",
    "z3fycdm",
    "z3kqmp3",
    "z3nnb9q",
    "z3rbg82",
    "z3tbwmn",
    "z3tg4wx",
    "z3wj6sg",
    "z4chng8",
    "z4mmn39",
    "z4mxsbk",
    "z4nsgk7",
    "z6339j6",
    "z6882hv",
    "z69k7ty",
    "z6bqkmn",
    "z6c4wsg",
    "z6vv4wx",
    "z6wwxnb",
    "z73b9ty",
    "z74dmbk",
    "z7d7gwx",
    "z7fycdm",
    "z7gjmp3",
    "z7nnb9q",
    "z7nrydm",
    "z7rcwmn",
    "z7ssgk7",
    "z82hsbk",
    "z849q6f",
    "z87tn39",
    "z88t97h",
    "z8bqxg8",
    "z8ftp4j",
    "z8mpfg8",
    "z8mxrwx",
    "z8nsb7h",
    "z8q9pbk",
    "z8sfr82",
    "z8thvcw",
    "z8w3n9q",
    "z8x6cj6",
    "z8yv4wx",
    "z99q7yc",
    "z9bbkqt",
    "z9jxhyc",
    "z9mxsbk",
    "z9pnb9q",
    "z9sfr82",
    "z9x6fg8",
    "zb6tyrd",
    "zbhgjxs",
    "zc9s6g8",
    "zcc2gdm",
    "zcd26sg",
    "zcgv39q",
    "zcjxhyc",
    "zcpnb9q",
    "zcqqtfr",
    "zcvgh39",
    "zcwmtfr",
    "zcyycdm",
    "zd2f7nb",
    "zd4dy9q",
    "zd63xyc",
    "zd66fg8",
    "zd8fv9q",
    "zdb4jfr",
    "zdhp34j",
    "zdp4382",
    "zdsfg2p",
    "zdyhn9q",
    "zdykjxs",
    "zf2f9j6",
    "zf2yf4j",
    "zf49q6f",
    "zf72pv4",
    "zfk82hv",
    "zfkk7ty",
    "zfmhvj6",
    "zfq7hyc",
    "zfwjxg8",
    "zg6tyrd",
    "zg87xnb",
    "zgffr82",
    "zghp34j",
    "zgjj6sg",
    "zgthvcw",
    "zgwc96f",
    "zgwwxnb",
    "zh4mrj6",
    "zh86n39",
    "zh8dmp3",
    "zh9kqyc",
    "zhdwxnb",
    "zhgrd2p",
    "zhjmnk7",
    "zhk82hv",
    "zhpchbk",
    "zhrcwmn",
    "zhrrd2p",
    "zj3d7ty",
    "zj3nf82",
    "zj44jxs",
    "zjbg87h",
    "zjhhvcw",
    "zjkj382",
    "zjkphbk",
    "zjnsgk7",
    "zjrk7v4",
    "zjv39j6",
    "zjwvb82",
    "zjyvcxs",
    "zk3jmbk",
    "zk66fg8",
    "zk6tyrd",
    "zkbbkqt",
    "zkbkf4j",
    "zkdvp4j",
    "zkfycdm",
    "zkk72v4",
    "zknsgk7",
    "zkpn3qt",
    "zkrkscw",
    "zks6hcw",
    "zkvv4wx",
    "zkx6fg8",
    "zkxxsbk",
    "zm49q6f",
    "zmrcwmn",
    "zn3vvk7",
    "zn49q6f",
    "zn76fdm",
    "zn8d239",
    "zndc96f",
    "zngg87h",
    "znjqtfr",
    "znk647h",
    "znmmn39",
    "zns9nrd",
    "znwhfg8",
    "znwj6sg",
    "zp3487h",
    "zp8dmp3",
    "zp8r4xs",
    "zpb9d2p",
    "zpbbkqt",
    "zpccwmn",
    "zpdtsbk",
    "zpdwxnb",
    "zpk87v4",
    "zpqxs82",
    "zprrd2p",
    "zpvckqt",
    "zpxnyrd",
    "zpyr9j6",
    "zq6svcw",
    "zqbg87h",
    "zqbsydm",
    "zqbw2hv",
    "zqc8239",
    "zqgrd2p",
    "zqhpk2p",
    "zqhyb9q",
    "zqj3n9q",
    "zqkk7ty",
    "zqnsgk7",
    "zqqsw6f",
    "zqsfr82",
    "zqtf34j",
    "zqv346f",
    "zr4nxbk",
    "zr6tyrd",
    "zr77hyc",
    "zrhp34j",
    "zrqqtfr",
    "zrssgk7",
    "zryycdm",
    "zs2tywx",
    "zs3487h",
    "zs44jxs",
    "zs7s4wx",
    "zs99q6f",
    "zs9k7ty",
    "zsdwmbk",
    "zsgkwmn",
    "zshp34j",
    "zsjpyrd",
    "zsjqtfr",
    "zsn4h39",
    "zsq7hyc",
    "zsrfvwx",
    "zsw4kty",
    "zt49jfr",
    "zt62mnb",
    "zt7xk2p",
    "zt8dmp3",
    "zt9k7ty",
    "ztkxpv4",
    "zttbcmn",
    "ztvckqt",
    "ztw2p9q",
    "ztyr9j6",
    "zv2mn39",
    "zv63d2p",
    "zvdwxnb",
    "zvhhvcw",
    "zvkk7ty",
    "zvmxsbk",
    "zvq9bdm",
    "zvsd8xs",
    "zvsfr82",
    "zvtsg2p",
    "zvwwxnb",
    "zwfyrmn",
    "zwg9qyc",
    "zwhp34j",
    "zwmpfg8",
    "zwpnb9q",
    "zwttyrd",
    "zwv39j6",
    "zwv8q6f",
    "zwvpsk7",
    "zwwp8mn",
    "zwyv4wx",
    "zx339j6",
    "zx3bkqt",
    "zx72pv4",
    "zx882hv",
    "zx9k7ty",
    "zxc4jxs",
    "zxfyjty",
    "zxn3r82",
    "zxrcdnb",
    "zxsbcdm",
    "zxvv4wx",
    "zy2mn39",
    "zy66fg8",
    "zy72pv4",
    "zyfkng8",
    "zyhp34j",
    "zyhs7p3",
    "zymykqt",
    "zyq7hyc",
    "zyxp3qt",
    "z67p3qt",
    "zwbr8p3",
    "zjgcdnb",
    "zqr4wsg",
    "z7c9jfr",
    "z24kqyc",
    "zm987v4",
    "zxkd239",
    "z68wmbk",
    "ztdjxg8",
    "zhwq6rd",
    "zbtpvj6",
    "zghn3qt",
    "zrpsb7h",
    "zcnfg2p",
    "z4syrmn",
    "z9fvcxs",
    "zky346f",
    "zgv9qyc"
  ]

  @impl Transformer
  def call(envelope = %Envelope{request: %Envelope.Request{path_params: %{"id" => id}}}) do
    {:ok, maybe_update_origin(id, envelope)}
  end

  def call(envelope), do: {:ok, envelope}

  defp is_webcore_id(id) do
    application_env = Application.get_env(:belfrage, :production_environment)

    if application_env === "live" do
      id in @webcore_live_ids
    else
      id in @webcore_test_ids
    end
  end

  defp maybe_update_origin(id, envelope) do
    if is_webcore_id(id) do
      Envelope.add(envelope, :private, %{
        platform: "Webcore",
        origin: Application.get_env(:belfrage, :pwa_lambda_function)
      })
    else
      envelope
    end
  end
end
