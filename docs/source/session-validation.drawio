<mxfile host="65bd71144e" modified="2020-11-18T17:09:13.344Z" agent="5.0 (Macintosh; Intel Mac OS X 10_14_6) AppleWebKit/537.36 (KHTML, like Gecko) Code/1.51.1 Chrome/83.0.4103.122 Electron/9.3.3 Safari/537.36" etag="7ObipQMZroyUcLaRBsLb" version="13.6.5">
    <diagram id="yKp5CQcjfNolYZbuaR4e" name="Page-1">
        <mxGraphModel dx="1339" dy="1356" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
            <root>
                <mxCell id="0"/>
                <mxCell id="1" parent="0"/>
                <mxCell id="25" value="" style="rounded=0;whiteSpace=wrap;html=1;fillColor=none;strokeColor=#999999;" parent="1" vertex="1">
                    <mxGeometry x="60" y="190" width="486" height="440" as="geometry"/>
                </mxCell>
                <mxCell id="17" value="&lt;h1&gt;Session Validation Diagram for Belfrage&lt;/h1&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;" style="text;html=1;strokeColor=none;fillColor=none;spacing=5;spacingTop=-20;whiteSpace=wrap;overflow=hidden;rounded=0;" parent="1" vertex="1">
                    <mxGeometry x="7.5" y="10" width="505" height="100" as="geometry"/>
                </mxCell>
                <mxCell id="37" value="idcta" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#bac8d3;strokeColor=#23445d;" parent="1" vertex="1">
                    <mxGeometry x="665" y="270" width="120" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="38" value="Account" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#bac8d3;strokeColor=#23445d;" parent="1" vertex="1">
                    <mxGeometry x="665" y="370" width="120" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="44" value="&lt;font color=&quot;#666666&quot;&gt;&lt;i&gt;&lt;b&gt;requests JWK keys from&lt;/b&gt;&lt;br&gt;[HTTPS]&lt;/i&gt;&lt;/font&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
                    <mxGeometry x="539" y="367" width="130" height="20" as="geometry"/>
                </mxCell>
                <mxCell id="45" value="&lt;font color=&quot;#666666&quot;&gt;&lt;i&gt;&lt;b&gt;requests config from&lt;/b&gt;&lt;br&gt;[HTTPS]&lt;/i&gt;&lt;/font&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
                    <mxGeometry x="547.25" y="266" width="106" height="20" as="geometry"/>
                </mxCell>
                <mxCell id="47" value="&lt;font color=&quot;#666666&quot;&gt;&lt;i&gt;&lt;b&gt;requests data from&lt;/b&gt;&lt;br&gt;[HTTPS]&lt;/i&gt;&lt;/font&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
                    <mxGeometry x="162" y="159" width="130" height="20" as="geometry"/>
                </mxCell>
                <mxCell id="62" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="106" target="69" edge="1">
                    <mxGeometry relative="1" as="geometry">
                        <Array as="points"/>
                        <mxPoint x="256" y="210" as="targetPoint"/>
                        <mxPoint x="167.51" y="140" as="sourcePoint"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="64" value="Signin" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#bac8d3;strokeColor=#23445d;" parent="1" vertex="1">
                    <mxGeometry x="665" y="510" width="120" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="66" value="Pres" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#bac8d3;strokeColor=#23445d;" parent="1" vertex="1">
                    <mxGeometry x="169" y="750" width="120" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="67" value="FABL" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#bac8d3;strokeColor=#23445d;" parent="1" vertex="1">
                    <mxGeometry x="386.25" y="750" width="120" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="76" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="69" target="71" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="69" value="&lt;b&gt;Routefile&lt;/b&gt;&lt;br&gt;&lt;br&gt;personalised route" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
                    <mxGeometry x="100" y="210" width="135" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="101" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="70" target="38">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="70" value="&lt;b&gt;JWK&lt;br&gt;&lt;/b&gt;[GenServer]&lt;b&gt;&lt;br&gt;&lt;/b&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
                    <mxGeometry x="380" y="370" width="132.5" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="79" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="71" target="75" edge="1">
                    <mxGeometry relative="1" as="geometry">
                        <Array as="points">
                            <mxPoint x="298" y="340"/>
                            <mxPoint x="298" y="300"/>
                        </Array>
                    </mxGeometry>
                </mxCell>
                <mxCell id="80" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="71" edge="1" target="70">
                    <mxGeometry relative="1" as="geometry">
                        <mxPoint x="380" y="430" as="targetPoint"/>
                        <Array as="points">
                            <mxPoint x="300" y="360"/>
                            <mxPoint x="300" y="400"/>
                        </Array>
                    </mxGeometry>
                </mxCell>
                <mxCell id="94" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="71" target="93" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="71" value="&lt;b&gt;user_session&lt;br&gt;&lt;/b&gt;[Transformer]&lt;br&gt;&amp;nbsp;&lt;br&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
                    <mxGeometry x="100" y="320" width="135" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="100" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="75" target="37">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="75" value="&lt;b&gt;idcta&lt;/b&gt;&lt;br&gt;[GenServer]" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
                    <mxGeometry x="377.5" y="270" width="135" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="77" value="&lt;font color=&quot;#666666&quot;&gt;&lt;i&gt;&lt;b&gt;get flagpole&lt;br&gt;status&amp;nbsp;from&lt;/b&gt;&lt;br&gt;&lt;/i&gt;&lt;/font&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
                    <mxGeometry x="238" y="272" width="130" height="20" as="geometry"/>
                </mxCell>
                <mxCell id="78" value="&lt;font color=&quot;#666666&quot;&gt;&lt;i&gt;&lt;b&gt;get matching JWK&lt;br&gt;key from&lt;/b&gt;&lt;br&gt;&lt;/i&gt;&lt;/font&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
                    <mxGeometry x="238" y="406" width="130" height="20" as="geometry"/>
                </mxCell>
                <mxCell id="84" value="&lt;font color=&quot;#666666&quot;&gt;&lt;i&gt;&lt;b&gt;No&lt;/b&gt;&lt;br&gt;set header redirect location to&lt;br&gt;&lt;/i&gt;&lt;/font&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
                    <mxGeometry x="536.25" y="506" width="133.75" height="20" as="geometry"/>
                </mxCell>
                <mxCell id="85" value="&lt;font color=&quot;#666666&quot;&gt;&lt;i&gt;&lt;b&gt;Yes&lt;/b&gt;&lt;br&gt;set personalisation headers for&lt;br&gt;&lt;/i&gt;&lt;/font&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
                    <mxGeometry x="448" y="656" width="111" height="20" as="geometry"/>
                </mxCell>
                <mxCell id="88" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="87" target="64" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="90" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="87" target="66" edge="1">
                    <mxGeometry relative="1" as="geometry">
                        <Array as="points">
                            <mxPoint x="446" y="730"/>
                            <mxPoint x="250" y="730"/>
                        </Array>
                    </mxGeometry>
                </mxCell>
                <mxCell id="91" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="87" target="67" edge="1">
                    <mxGeometry relative="1" as="geometry">
                        <Array as="points">
                            <mxPoint x="446" y="790"/>
                            <mxPoint x="446" y="790"/>
                        </Array>
                    </mxGeometry>
                </mxCell>
                <mxCell id="87" value="access token valid?" style="rhombus;whiteSpace=wrap;html=1;" parent="1" vertex="1">
                    <mxGeometry x="397.5" y="490" width="97.5" height="100" as="geometry"/>
                </mxCell>
                <mxCell id="95" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="93" target="87" edge="1">
                    <mxGeometry relative="1" as="geometry">
                        <Array as="points">
                            <mxPoint x="310" y="540"/>
                            <mxPoint x="310" y="540"/>
                        </Array>
                    </mxGeometry>
                </mxCell>
                <mxCell id="96" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="93" target="66" edge="1">
                    <mxGeometry relative="1" as="geometry">
                        <Array as="points">
                            <mxPoint x="168" y="710"/>
                            <mxPoint x="229" y="710"/>
                        </Array>
                    </mxGeometry>
                </mxCell>
                <mxCell id="97" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.45;entryY=0.983;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" source="93" target="67" edge="1">
                    <mxGeometry relative="1" as="geometry">
                        <Array as="points">
                            <mxPoint x="168" y="710"/>
                            <mxPoint x="430" y="710"/>
                        </Array>
                    </mxGeometry>
                </mxCell>
                <mxCell id="93" value="user has id &lt;br&gt;token and&lt;br&gt;flagpole&lt;br&gt;green?" style="rhombus;whiteSpace=wrap;html=1;" parent="1" vertex="1">
                    <mxGeometry x="101.89" y="480" width="131.25" height="120" as="geometry"/>
                </mxCell>
                <mxCell id="98" value="&lt;font color=&quot;#666666&quot;&gt;&lt;i&gt;&lt;b&gt;No&lt;/b&gt;&lt;br&gt;don't set personalisation&lt;br&gt;headers for&lt;br&gt;&lt;/i&gt;&lt;/font&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
                    <mxGeometry x="169" y="656" width="140" height="20" as="geometry"/>
                </mxCell>
                <mxCell id="99" value="&lt;font color=&quot;#666666&quot;&gt;&lt;i&gt;&lt;b&gt;Yes&lt;/b&gt;&lt;br&gt;&lt;/i&gt;&lt;/font&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
                    <mxGeometry x="296.25" y="518.5" width="35" height="20" as="geometry"/>
                </mxCell>
                <mxCell id="102" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" edge="1" parent="1" source="85" target="85">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="103" value="decision" style="rhombus;whiteSpace=wrap;html=1;" vertex="1" parent="1">
                    <mxGeometry x="717.5" y="750" width="67.5" height="64" as="geometry"/>
                </mxCell>
                <mxCell id="54" value="container" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
                    <mxGeometry x="715" y="667" width="70" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="56" value="person" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#0050ef;strokeColor=#001DBC;fontColor=#ffffff;" parent="1" vertex="1">
                    <mxGeometry x="715" y="625" width="70" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="57" value="external system" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#bac8d3;strokeColor=#23445d;" parent="1" vertex="1">
                    <mxGeometry x="715" y="710" width="70" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="58" value="&lt;b&gt;Legend&lt;/b&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
                    <mxGeometry x="715" y="600" width="70" height="20" as="geometry"/>
                </mxCell>
                <mxCell id="106" value="GTM" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#bac8d3;strokeColor=#23445d;" vertex="1" parent="1">
                    <mxGeometry x="107.52" y="80" width="120" height="60" as="geometry"/>
                </mxCell>
            </root>
        </mxGraphModel>
    </diagram>
</mxfile>
